<!DOCTYPE html>
<html>
<head>
	<title>Assignment Project - TOH</title>
	<link rel="stylesheet" type="text/css" href="css/page.css">
	<script type="text/javascript" src="js/jquery.js"></script>
</head>
<body>
	<h1></h1>
	<h2></h2>
	<select autofocus="autofocus" id="form1">
		<option value="3">Three</option>
		<option value="4">Four</option>
		<option value="5">Five</option>
	</select>

	<button type="button" onclick="startExecution(this)">Start</button>
	<canvas id = "animation" width = "1000" height = "500" style="border:1px solid #000000;"></canvas>

	<script type="text/javascript">
		var myHeading = document.querySelector('h1');
		myHeading.textContent = 'Tower of Hanoi';

		var depth = 490; var leftMost = 100; var rightMost = 1000; var height = 300; var unitLen = (rightMost - leftMost) / 14;
		function fillCanvas () {
			var ctx = document.getElementById("animation").getContext("2d");
			ctx.beginPath();
			ctx.lineWidth = 5;
			drawTower(ctx, leftMost, rightMost, height, depth);
			ctx.stroke();
			ctx.closePath();
			addWeights(ctx, 3);
		}

		function clearCanvas () {
			var ctx = document.getElementById("animation").getContext("2d");
			ctx.clearRect(0,0,1000,500)
		}

		function drawTower (ctx, hor1, hor2, height, frameDepth) {
			var h1 = hor1; h2 = h1+3*unitLen;
			for (var i = 0; i < 3; i++) {
				ctx.moveTo(h1, frameDepth); ctx.lineTo(h2, frameDepth);
				var middlePoint = (h1 + h2) / 2;
				ctx.moveTo(middlePoint, frameDepth); ctx.lineTo(middlePoint, frameDepth - height);
				h1 = h2 + unitLen; h2 = h1+3*unitLen;
			}
		}

		function addWeights (ctx, count) {
			var xMid = leftMost + 1.5*unitLen;
			var d = depth; var width = 2*unitLen; var h = 10;
			for (var i = 0; i < count; i++) {
				ctx.rect(xMid - width / 2, d - h, width, h);
				d = d - h;
				width = 0.8 * width;
			}
			ctx.stroke();
		}

		function resetCanvas () {
			clearCanvas();
			fillCanvas();
		}
		
		function startExecution (el) {
			if (el.innerHTML == 'Start') {
				resetCanvas();
				//startAnimation
				el.innerHTML = 'Pause';
			} else if (el.innerHTML == 'Pause') {
				//resume animation
				el.innerHTML = 'Resume';
			} else {
				//pause the animation
				el.innerHTML = 'Pause';
			}
		}
		/*var e = document.getElementById("form1");
		var count = e.options[e.selectedIndex].text;
		var myHeading1 = document.querySelector('h2');
		myHeading1.textContent = count;*/
		/*var prevValue = document.querySelector('button').textContent;
		document.querySelector('h1').textContent = prevValue;*/
	</script>

</body>
</html>